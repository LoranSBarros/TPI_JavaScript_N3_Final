<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de Cliente</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function validarCliente() {
            const nome = document.getElementById("nome").value;
            const dataNascimento = new Date(document.getElementById("dataNascimento").value);
            const cpf = document.getElementById("cpf").value.replace(/\D/g, "");
            const telefone = document.getElementById("telefone").value;
            const email = document.getElementById("email").value;
            const senha = document.getElementById("senha").value;
            const hoje = new Date();

            let erros = [];

            if (!nome.includes(" ")) erros.push("O nome deve conter pelo menos duas palavras.");
            if (dataNascimento >= hoje) erros.push("A data de nascimento deve ser anterior à data atual.");
            if (cpf.length !== 11) erros.push("O CPF deve conter exatamente 11 dígitos.");
            if (!/^\(\d{2}\) \d \d{4}-\d{4}$/.test(telefone)) erros.push("Telefone inválido.");
            if (!email.includes("@") || !email.split("@")[1].includes(".")) erros.push("E-mail inválido.");
            if (senha.length < 6) erros.push("A senha deve conter pelo menos 6 dígitos.");

            if (erros.length > 0) {
                alert(erros.join("\n"));
                return false;
            }

            alert("Cadastro feito com sucesso. Para finalizar o cadastro é necessário acessar o email.");
            document.getElementById("formCadastro").reset();  // Resetando o formulário
            return false;
        }

        function mascaraCPF(input) {
            let cpf = input.value.replace(/\D/g, "");
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
            cpf = cpf.replace(/(\d{3})(\d)/, "$1.$2");
            cpf = cpf.replace(/(\d{3})(\d{1,2})$/, "$1-$2");
            input.value = cpf;
        }

        function mascaraTelefone(input) {
            let telefone = input.value.replace(/\D/g, "");
            telefone = telefone.replace(/(\d{2})(\d)/, "($1) $2");
            telefone = telefone.replace(/(\d{1})(\d{4})(\d{4})$/, "$1 $2-$3");
            input.value = telefone;
        }

        function toggleSenha() {
            const senhaInput = document.getElementById("senha");
            const tipo = senhaInput.type === "password" ? "text" : "password";
            senhaInput.type = tipo;
            const icone = document.getElementById("icone-senha");
            icone.src = tipo === "password" ? "Imagens/olhof.png" : "Imagens/olhoa.png";
        }
    </script>
</head>
<body>
    <nav style="background-color: #0337e4; color: #fff; padding: 10px; text-align: center;">
        <a href="loja_de_instrumentos.html" style="color: #fff; text-decoration: none; font-size: 18px;">Início</a>
    </nav>

    <main style="padding: 20px; font-family: Arial, sans-serif;">
        <h1>Cadastro de Cliente</h1>
        <form id="formCadastro" onsubmit="return validarCliente()" style="max-width: 500px; margin: auto;">
            <label for="nome">Nome Completo:</label>
            <input type="text" id="nome" required style="width: 100%; padding: 8px; margin: 10px 0;"><br>

            <label for="dataNascimento">Data de Nascimento:</label>
            <input type="date" id="dataNascimento" required style="width: 100%; padding: 8px; margin: 10px 0;"><br>

            <label for="cpf">CPF:</label>
            <input type="text" id="cpf" placeholder="000.000.000-00" maxlength="14" oninput="mascaraCPF(this)" required style="width: 100%; padding: 8px; margin: 10px 0;"><br>

            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" placeholder="(00) 0 0000-0000" maxlength="15" oninput="mascaraTelefone(this)" required style="width: 100%; padding: 8px; margin: 10px 0;"><br>

            <label for="email">E-mail:</label>
            <input type="email" id="email" required style="width: 100%; padding: 8px; margin: 10px 0;"><br>

            <label for="senha" style="display: flex; align-items: center;">
                Senha:
                <img id="icone-senha" src="https://img.icons8.com/ios-filled/20/000000/invisible.png" style="cursor: pointer; margin-left: 10px;" onclick="toggleSenha()">
            </label>
            <input type="password" id="senha" required style="width: 100%; padding: 8px; margin: 10px 0;"><br>

            <button type="submit" style="background-color: #010264; color: #fff; padding: 10px 20px; border: none; cursor: pointer; font-size: 16px;">Cadastrar</button>
        </form>
    </main>
</body>
</html>
